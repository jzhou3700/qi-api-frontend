"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[767],{19718:function(M,w,t){t.r(w),t.d(w,{default:function(){return b}});var j=t(97857),c=t.n(j),I=t(19632),f=t.n(I),U=t(15009),d=t.n(U),T=t(99289),g=t.n(T),O=t(5574),D=t.n(O),P=t(67294),_=t(74087),E=t(78721),m=t(45360),C=t(86738),R=t(45618),p=t(85893),B=[{title:"id",valueType:"index",dataIndex:"id",hideInTable:!0,align:"center",key:"id"},{title:"\u8BA2\u5355\u540D\u79F0",dataIndex:"orderName",align:"center",key:"orderName",ellipsis:!0,copyable:!0,width:120,render:function(a,l){return(0,p.jsx)(R.Link,{to:"/order/info/".concat(l.id),children:l.orderName},l.id)}},{title:"\u8BA2\u5355\u53F7",align:"center",dataIndex:"orderNo",key:"orderNo",ellipsis:!0,copyable:!0},{title:"\u8BA2\u5355\u72B6\u6001",dataIndex:"status",key:"status",filters:!0,width:"sm",align:"center",onFilter:!0,valueEnum:{NOTPAY:{text:"\u672A\u652F\u4ED8",status:"Error"},SUCCESS:{text:"\u652F\u4ED8\u6210\u529F",status:"Success"},CLOSED:{text:"\u5DF2\u53D6\u6D88",status:"Default"}}},{title:"\u8BA2\u5355\u7C7B\u578B",dataIndex:"productType",key:"productType",width:"sm",filters:!0,align:"center",onFilter:!0,valueEnum:{VIP:{text:"VIP\u4F1A\u5458"},RECHARGE:{text:"\u79EF\u5206\u5145\u503C"},RECHARGEACTIVITY:{text:"\u5145\u503C\u6D3B\u52A8"}}},{title:"\u652F\u4ED8\u7C7B\u578B",dataIndex:"payType",key:"payType",filters:!0,width:"sm",align:"center",onFilter:!0,valueEnum:{WX:{text:"\u5FAE\u4FE1"},ALIPAY:{text:"\u652F\u4ED8\u5B9D"}}},{title:"\u8BA2\u5355\u91D1\u989D",dataIndex:"total",key:"total",width:"sm",align:"center",valueType:"money",sorter:function(a,l){return a.total-l.total}},{title:"\u589E\u52A0\u79EF\u5206\u6570",dataIndex:"addPoints",width:"sm",key:"addPoints",align:"center",sorter:function(a,l){return a.addPoints-l.addPoints}},{title:"\u8FC7\u671F\u65F6\u95F4",dataIndex:"expirationTime",key:"expirationTime",valueType:"dateTime",align:"center",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",align:"center",key:"createTime",valueType:"dateTime",hideInSearch:!0},{title:"\u8BA2\u5355\u63CF\u8FF0",dataIndex:"description",key:"description",ellipsis:!0,copyable:!0,align:"center",valueType:"text",hideInSearch:!0}],S=B,A=t(84865),b=function(){var s=(0,P.useState)(!1),a=D()(s,2),l=a[0],y=a[1],e=(0,P.useRef)(),N=(0,P.useState)(),$=D()(N,2),k=$[0],x=$[1],Z=function(){var v=g()(d()().mark(function u(o){var r,h,i;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=m.ZP.loading("\u6B63\u5728\u53D6\u6D88\u8BA2\u5355"),o){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,(0,_.w1)({orderNo:o.orderNo});case 6:return h=n.sent,r(),h.data&&(m.ZP.success("\u53D6\u6D88\u8BA2\u5355\u6210\u529F"),(i=e.current)===null||i===void 0||i.reload()),n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(3),r(),m.ZP.error("\u53D6\u6D88\u8BA2\u5355\u5931\u8D25",n.t0.message),n.abrupt("return",!1);case 17:case"end":return n.stop()}},u,null,[[3,12]])}));return function(o){return v.apply(this,arguments)}}(),G=function(){var v=g()(d()().mark(function u(o){var r,h,i;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=m.ZP.loading("\u6B63\u5728\u5220\u9664\u8BA2\u5355"),o){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,(0,_.ts)({id:o.id});case 6:return h=n.sent,r(),h.data&&(m.ZP.success("\u5220\u9664\u8BA2\u5355\u6210\u529F"),(i=e.current)===null||i===void 0||i.reload()),n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(3),r(),m.ZP.error("\u5220\u9664\u8BA2\u5355\u5931\u8D25",n.t0.message),n.abrupt("return",!1);case 17:case"end":return n.stop()}},u,null,[[3,12]])}));return function(o){return v.apply(this,arguments)}}(),L=function(u){if(u.payType==="WX"){if(!u.codeUrl){m.ZP.error("\u8BA2\u5355\u83B7\u53D6\u5931\u8D25");return}var o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);o?window.location.href=u.codeUrl:(m.ZP.loading("\u6B63\u5728\u524D\u5F80\u6536\u94F6\u53F0,\u8BF7\u7A0D\u540E.....",.6),setTimeout(function(){var r,h;A.m8.push("/order/pay/".concat(u.id,"?codeUrl=").concat(u==null||(r=u.codeUrl)===null||r===void 0?void 0:r.trim(),"&payType=").concat(u==null||(h=u.payType)===null||h===void 0?void 0:h.trim()))},800))}else m.ZP.loading("\u6B63\u5728\u524D\u5F80\u6536\u94F6\u53F0,\u8BF7\u7A0D\u540E...."),setTimeout(function(){if(!u.formData){m.ZP.error("\u8BA2\u5355\u83B7\u53D6\u5931\u8D25");return}document.write(u.formData),y(!1)},2e3)},F=function(){var v=g()(d()().mark(function u(){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,G(k);case 2:case"end":return r.stop()}},u)}));return function(){return v.apply(this,arguments)}}(),W=function(){var v=g()(d()().mark(function u(){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Z(k);case 2:case"end":return r.stop()}},u)}));return function(){return v.apply(this,arguments)}}(),Y=[].concat(f()(S),[{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(u,o){return[(0,p.jsx)("a",{onClick:function(){location.href="/order/info/".concat(o.id)},children:"\u67E5\u770B"},"SUCCESS"),(o==null?void 0:o.status)!=="NOTPAY"&&(0,p.jsx)(C.Z,{title:"\u8BF7\u786E\u8BA4\u662F\u5426\u5220\u9664\u8BE5\u8BA2\u5355!",onConfirm:F,okText:"Yes",cancelText:"No",children:(0,p.jsx)("a",{style:{color:"red"},onClick:g()(d()().mark(function r(){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:x(o);case 1:case"end":return i.stop()}},r)})),children:"\u5220\u9664"},"SUCCESS")},"Delete"),o.status==="NOTPAY"&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("a",{onClick:function(){L(o)},children:"\u4ED8\u6B3E"},"Pay"),(0,p.jsx)(C.Z,{title:"\u8BF7\u786E\u8BA4\u662F\u5426\u53D6\u6D88\u8BE5\u8BA2\u5355!",onConfirm:W,okText:"Yes",cancelText:"No",children:(0,p.jsx)("a",{style:{color:"rgba(150,151,153,0.76)"},onClick:g()(d()().mark(function r(){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:x(o);case 1:case"end":return i.stop()}},r)})),children:"\u53D6\u6D88"},"Closed")},"Closed")]})]}}]);return(0,p.jsx)(E.QV,{loading:l,rowKey:"name",actionRef:e,columns:Y,pagination:{defaultPageSize:10},request:function(){var v=g()(d()().mark(function u(o){var r;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return y(!0),i.next=3,(0,_.Yx)(c()({},o));case 3:if(r=i.sent,!r.data){i.next=9;break}return y(!1),i.abrupt("return",{data:r.data.records||[],success:!0,total:r.data.total});case 9:return i.abrupt("return",{data:[],success:!1,total:0});case 10:case"end":return i.stop()}},u)}));return function(u){return v.apply(this,arguments)}}()})}},74087:function(M,w,t){t.d(w,{VZ:function(){return D},Yx:function(){return R},iZ:function(){return A},tF:function(){return m},ts:function(){return _},w1:function(){return g}});var j=t(15009),c=t.n(j),I=t(97857),f=t.n(I),U=t(99289),d=t.n(U),T=t(45618);function g(s,a){return O.apply(this,arguments)}function O(){return O=d()(c()().mark(function s(a,l){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/order/closed",f()({method:"POST",params:f()({},a)},l||{})));case 1:case"end":return e.stop()}},s)})),O.apply(this,arguments)}function D(s,a){return P.apply(this,arguments)}function P(){return P=d()(c()().mark(function s(a,l){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/order/create",f()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},s)})),P.apply(this,arguments)}function _(s,a){return E.apply(this,arguments)}function E(){return E=d()(c()().mark(function s(a,l){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/order/delete",f()({method:"POST",params:f()({},a)},l||{})));case 1:case"end":return e.stop()}},s)})),E.apply(this,arguments)}function m(s,a){return C.apply(this,arguments)}function C(){return C=d()(c()().mark(function s(a,l){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/order/get",f()({method:"GET",params:f()({},a)},l||{})));case 1:case"end":return e.stop()}},s)})),C.apply(this,arguments)}function R(s,a){return p.apply(this,arguments)}function p(){return p=d()(c()().mark(function s(a,l){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/order/list/page",f()({method:"GET",params:f()({},a)},l||{})));case 1:case"end":return e.stop()}},s)})),p.apply(this,arguments)}function B(s,a){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime().mark(function s(a,l){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/order/notify/order",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},s)})),S.apply(this,arguments)}function A(s,a){return b.apply(this,arguments)}function b(){return b=d()(c()().mark(function s(a,l){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/order/query/status",f()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},s)})),b.apply(this,arguments)}}}]);
