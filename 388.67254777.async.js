"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[388],{50727:function(ye,H,t){var C=t(4942),W=t(97685),j=t(91),V=t(74165),U=t(15861),d=t(1413),te=t(30859),J=t(97462),N=t(30117),re=t(89451),le=t(48171),de=t(53914),ae=t(22270),X=t(60249),ue=t(28036),G=t(22150),Q=t(21770),F=t(88306),oe=t(8880),y=t(67294),ve=t(44945),h=t(85893),fe=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],ge=["record","position","creatorButtonText","newRecordType","parentKey","style"],ie=y.createContext(void 0);function K(n){var M=n.children,A=n.record,e=n.position,o=n.newRecordType,c=n.parentKey,r=(0,y.useContext)(ie);return y.cloneElement(M,(0,d.Z)((0,d.Z)({},M.props),{},{onClick:function(){var a=(0,U.Z)((0,V.Z)().mark(function _(I){var P,S,b,T;return(0,V.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(P=(S=M.props).onClick)===null||P===void 0?void 0:P.call(S,I);case 2:if(T=m.sent,T!==!1){m.next=5;break}return m.abrupt("return");case 5:r==null||(b=r.current)===null||b===void 0||b.addEditRecord(A,{position:e,newRecordType:o,parentKey:c});case 6:case"end":return m.stop()}},_)}));function E(_){return a.apply(this,arguments)}return E}()}))}function se(n){var M,A,e=(0,re.useIntl)(),o=n.onTableChange,c=n.maxLength,r=n.formItemProps,a=n.recordCreatorProps,E=n.rowKey,_=n.controlled,I=n.defaultValue,P=n.onChange,S=n.editableFormRef,b=(0,j.Z)(n,fe),T=(0,y.useRef)(void 0),R=(0,y.useRef)(),m=(0,y.useRef)();(0,y.useImperativeHandle)(b.actionRef,function(){return R.current},[R.current]);var Y=(0,Q.Z)(function(){return n.value||I||[]},{value:n.value,onChange:n.onChange}),x=(0,W.Z)(Y,2),v=x[0],p=x[1],$=y.useMemo(function(){return typeof E=="function"?E:function(i,f){return i[E]||f}},[E]),w=(0,le.J)(function(i){if(typeof i=="number"&&!n.name){if(i>=v.length)return i;var f=v&&v[i];return $==null?void 0:$(f,i)}if((typeof i=="string"||i>=v.length)&&n.name){var s=v.findIndex(function(l,u){var g;return($==null||(g=$(l,u))===null||g===void 0?void 0:g.toString())===(i==null?void 0:i.toString())});if(s!==-1)return s}return i});(0,y.useImperativeHandle)(S,function(){var i=function(l){var u,g;if(l==null)throw new Error("rowIndex is required");var O=w(l),B=[n.name,(u=O==null?void 0:O.toString())!==null&&u!==void 0?u:""].flat(1).filter(Boolean);return(g=m.current)===null||g===void 0?void 0:g.getFieldValue(B)},f=function(){var l,u=[n.name].flat(1).filter(Boolean);if(Array.isArray(u)&&u.length===0){var g,O=(g=m.current)===null||g===void 0?void 0:g.getFieldsValue();return Array.isArray(O)?O:Object.keys(O).map(function(B){return O[B]})}return(l=m.current)===null||l===void 0?void 0:l.getFieldValue(u)};return(0,d.Z)((0,d.Z)({},m.current),{},{getRowData:i,getRowsData:f,setRowData:function(l,u){var g,O;if(l==null)throw new Error("rowIndex is required");var B=w(l),ne=[n.name,(g=B==null?void 0:B.toString())!==null&&g!==void 0?g:""].flat(1).filter(Boolean),Oe=Object.assign({},(0,d.Z)((0,d.Z)({},i(l)),u||{})),Pe=(0,oe.Z)({},ne,Oe);return(O=m.current)===null||O===void 0||O.setFieldsValue(Pe),!0}})},[w,n.name,m.current]),(0,y.useEffect)(function(){n.controlled&&(v||[]).forEach(function(i,f){var s;(s=m.current)===null||s===void 0||s.setFieldsValue((0,C.Z)({},"".concat($(i,f)),i))},{})},[(0,de.ZP)(v),n.controlled]),(0,y.useEffect)(function(){if(n.name){var i;m.current=n==null||(i=n.editable)===null||i===void 0?void 0:i.form}},[(M=n.editable)===null||M===void 0?void 0:M.form,n.name]);var Z=a||{},k=Z.record,q=Z.position,D=Z.creatorButtonText,me=Z.newRecordType,Ce=Z.parentKey,he=Z.style,_e=(0,j.Z)(Z,ge),ee=q==="top",L=(0,y.useMemo)(function(){return typeof c=="number"&&c<=(v==null?void 0:v.length)?!1:a!==!1&&(0,h.jsx)(K,{record:(0,ae.h)(k,v==null?void 0:v.length,v)||{},position:q,parentKey:(0,ae.h)(Ce,v==null?void 0:v.length,v),newRecordType:me,children:(0,h.jsx)(ue.ZP,(0,d.Z)((0,d.Z)({type:"dashed",style:(0,d.Z)({display:"block",margin:"10px 0",width:"100%"},he),icon:(0,h.jsx)(te.Z,{})},_e),{},{children:D||e.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[a,c,v==null?void 0:v.length]),Ee=(0,y.useMemo)(function(){return L?ee?{components:{header:{wrapper:function(f){var s,l=f.className,u=f.children;return(0,h.jsxs)("thead",{className:l,children:[u,(0,h.jsxs)("tr",{style:{position:"relative"},children:[(0,h.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:L}),(0,h.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(s=b.columns)===null||s===void 0?void 0:s.length,children:L})]})]})}}}}:{tableViewRender:function(f,s){var l,u;return(0,h.jsxs)(h.Fragment,{children:[(l=(u=n.tableViewRender)===null||u===void 0?void 0:u.call(n,f,s))!==null&&l!==void 0?l:s,L]})}}:{}},[ee,L]),z=(0,d.Z)({},n.editable),be=(0,le.J)(function(i,f){var s,l,u;if((s=n.editable)===null||s===void 0||(l=s.onValuesChange)===null||l===void 0||l.call(s,i,f),(u=n.onValuesChange)===null||u===void 0||u.call(n,f,i),n.controlled){var g;n==null||(g=n.onChange)===null||g===void 0||g.call(n,f)}});return(n!=null&&n.onValuesChange||(A=n.editable)!==null&&A!==void 0&&A.onValuesChange||n.controlled&&n!==null&&n!==void 0&&n.onChange)&&(z.onValuesChange=be),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ie.Provider,{value:R,children:(0,h.jsx)(ve.Z,(0,d.Z)((0,d.Z)((0,d.Z)({search:!1,options:!1,pagination:!1,rowKey:E,revalidateOnFocus:!1},b),Ee),{},{tableLayout:"fixed",actionRef:R,onChange:o,editable:(0,d.Z)((0,d.Z)({},z),{},{formProps:(0,d.Z)({formRef:m},z.formProps)}),dataSource:v,onDataSourceChange:function(f){if(p(f),n.name&&q==="top"){var s,l=(0,oe.Z)({},[n.name].flat(1).filter(Boolean),f);(s=m.current)===null||s===void 0||s.setFieldsValue(l)}}}))}),n.name?(0,h.jsx)(J.Z,{name:[n.name],children:function(f){var s,l;if(!T.current)return T.current=v,null;var u=(0,F.Z)(f,[n.name].flat(1)),g=u==null?void 0:u.find(function(O,B){var ne;return!(0,X.A)(O,(ne=T.current)===null||ne===void 0?void 0:ne[B])});return T.current=v,g&&(n==null||(s=n.editable)===null||s===void 0||(l=s.onValuesChange)===null||l===void 0||l.call(s,g,u)),null}}):null]})}function ce(n){var M=N.default.useFormInstance();return n.name?(0,h.jsx)(G.Z.Item,(0,d.Z)((0,d.Z)({style:{maxWidth:"100%"}},n==null?void 0:n.formItemProps),{},{name:n.name,shouldUpdate:function(e,o){var c=[n.name].flat(1);try{return JSON.stringify((0,F.Z)(e,c))!==JSON.stringify((0,F.Z)(o,c))}catch(r){return!0}},children:(0,h.jsx)(se,(0,d.Z)((0,d.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},n),{},{editable:(0,d.Z)((0,d.Z)({},n.editable),{},{form:M})}))})):(0,h.jsx)(se,(0,d.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},n))}ce.RecordCreator=K,H.Z=ce},30859:function(ye,H,t){var C=t(87462),W=t(67294),j=t(42110),V=t(95094),U=function(J,N){return W.createElement(V.Z,(0,C.Z)({},J,{ref:N,icon:j.Z}))},d=W.forwardRef(U);H.Z=d},66309:function(ye,H,t){t.d(H,{Z:function(){return A}});var C=t(67294),W=t(93967),j=t.n(W),V=t(98423),U=t(98787),d=t(69760),te=t(96159),J=t(45353),N=t(53124),re=t(861),le=t(10274),de=t(14747),ae=t(83262),X=t(83559);const ue=e=>{const{paddingXXS:o,lineWidth:c,tagPaddingHorizontal:r,componentCls:a,calc:E}=e,_=E(r).sub(c).equal(),I=E(o).sub(c).equal();return{[a]:Object.assign(Object.assign({},(0,de.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:_,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,re.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:I,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:_}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},G=e=>{const{lineWidth:o,fontSizeIcon:c,calc:r}=e,a=e.fontSizeSM;return(0,ae.mergeToken)(e,{tagFontSize:a,tagLineHeight:(0,re.unit)(r(e.lineHeightSM).mul(a).equal()),tagIconSize:r(c).sub(r(o).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},Q=e=>({defaultBg:new le.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var F=(0,X.I$)("Tag",e=>{const o=G(e);return ue(o)},Q),oe=function(e,o){var c={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.indexOf(r)<0&&(c[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)o.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(c[r[a]]=e[r[a]]);return c},ve=C.forwardRef((e,o)=>{const{prefixCls:c,style:r,className:a,checked:E,onChange:_,onClick:I}=e,P=oe(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:S,tag:b}=C.useContext(N.E_),T=p=>{_==null||_(!E),I==null||I(p)},R=S("tag",c),[m,Y,x]=F(R),v=j()(R,`${R}-checkable`,{[`${R}-checkable-checked`]:E},b==null?void 0:b.className,a,Y,x);return m(C.createElement("span",Object.assign({},P,{ref:o,style:Object.assign(Object.assign({},r),b==null?void 0:b.style),className:v,onClick:T})))}),h=t(98719);const fe=e=>(0,h.Z)(e,(o,c)=>{let{textColor:r,lightBorderColor:a,lightColor:E,darkColor:_}=c;return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:r,background:E,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:_,borderColor:_},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var ge=(0,X.bk)(["Tag","preset"],e=>{const o=G(e);return fe(o)},Q);function ie(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const K=(e,o,c)=>{const r=ie(c);return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:e[`color${c}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var se=(0,X.bk)(["Tag","status"],e=>{const o=G(e);return[K(o,"success","Success"),K(o,"processing","Info"),K(o,"error","Error"),K(o,"warning","Warning")]},Q),ce=function(e,o){var c={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.indexOf(r)<0&&(c[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)o.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(c[r[a]]=e[r[a]]);return c};const M=C.forwardRef((e,o)=>{const{prefixCls:c,className:r,rootClassName:a,style:E,children:_,icon:I,color:P,onClose:S,bordered:b=!0,visible:T}=e,R=ce(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:m,direction:Y,tag:x}=C.useContext(N.E_),[v,p]=C.useState(!0),$=(0,V.Z)(R,["closeIcon","closable"]);C.useEffect(()=>{T!==void 0&&p(T)},[T]);const w=(0,U.o2)(P),Z=(0,U.yT)(P),k=w||Z,q=Object.assign(Object.assign({backgroundColor:P&&!k?P:void 0},x==null?void 0:x.style),E),D=m("tag",c),[me,Ce,he]=F(D),_e=j()(D,x==null?void 0:x.className,{[`${D}-${P}`]:k,[`${D}-has-color`]:P&&!k,[`${D}-hidden`]:!v,[`${D}-rtl`]:Y==="rtl",[`${D}-borderless`]:!b},r,a,Ce,he),ee=f=>{f.stopPropagation(),S==null||S(f),!f.defaultPrevented&&p(!1)},[,L]=(0,d.Z)((0,d.w)(e),(0,d.w)(x),{closable:!1,closeIconRender:f=>{const s=C.createElement("span",{className:`${D}-close-icon`,onClick:ee},f);return(0,te.wm)(f,s,l=>({onClick:u=>{var g;(g=l==null?void 0:l.onClick)===null||g===void 0||g.call(l,u),ee(u)},className:j()(l==null?void 0:l.className,`${D}-close-icon`)}))}}),Ee=typeof R.onClick=="function"||_&&_.type==="a",z=I||null,be=z?C.createElement(C.Fragment,null,z,_&&C.createElement("span",null,_)):_,i=C.createElement("span",Object.assign({},$,{ref:o,className:_e,style:q}),be,L,w&&C.createElement(ge,{key:"preset",prefixCls:D}),Z&&C.createElement(se,{key:"status",prefixCls:D}));return me(Ee?C.createElement(J.Z,{component:"Tag"},i):i)});M.CheckableTag=ve;var A=M}}]);
