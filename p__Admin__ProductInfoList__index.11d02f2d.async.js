"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[868],{28816:function(x,U,n){var G=n(19632),v=n.n(G),k=n(15009),l=n.n(k),Z=n(99289),E=n.n(Z),b=n(77646),g=n(28036),j=n(67294),C=n(85893),R=function(y){var p=(0,j.useRef)(),S=y.width,L=y.open,w=y.onOpenChange,O=y.title,I=y.value,M=y.onSubmit,A=y.columns,B=y.size;return(0,j.useEffect)(function(){var P=I==null?void 0:I.id;if(!P){var f;(f=p.current)===null||f===void 0||f.resetFields()}if(p&&P){var T;(T=p.current)===null||T===void 0||T.setFieldsValue(I)}},[I]),(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(b.Z,{width:S,title:O,size:B,open:L(),onOpenChange:w,formRef:p,autoFocusFirstInput:!0,layoutType:"ModalForm",onFinish:function(){var P=E()(l()().mark(function f(T){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:M==null||M(T);case 1:case"end":return u.stop()}},f)}));return function(f){return P.apply(this,arguments)}}(),grid:!0,rowProps:{gutter:[16,16]},colProps:{span:12},submitter:{render:function(f,T){return[].concat(v()(T),[(0,C.jsx)(g.ZP,{onClick:function(){var u;(u=p.current)===null||u===void 0||u.resetFields()},children:"\u91CD\u7F6E"},"extra-reset")])}},columns:A})})};U.Z=R},8128:function(x,U,n){n.r(U),n.d(U,{default:function(){return o}});var G=n(19632),v=n.n(G),k=n(15009),l=n.n(k),Z=n(97857),E=n.n(Z),b=n(99289),g=n.n(b),j=n(5574),C=n.n(j),R=n(51042),W=n(44945),y=n(45618),p=n(45360),S=n(86738),L=n(4393),w=n(28036),O=n(67294),I=n(28816),M=[{title:"id",valueType:"index",dataIndex:"id",hideInTable:!0,key:"id"},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"name",tooltip:"\u5546\u54C1\u540D\u79F0",key:"name",formItemProps:{rules:[{required:!0,message:"\u5546\u54C1\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]},width:"lg",colProps:{span:24}},{title:"\u4EA7\u54C1\u7C7B\u578B",dataIndex:"productType",key:"productType",valueEnum:{VIP:{text:"VIP\u4F1A\u5458"},RECHARGE:{text:"\u79EF\u5206\u5145\u503C"},RECHARGEACTIVITY:{text:"\u5145\u503C\u6D3B\u52A8"}}},{tooltip:"\u672C\u5546\u54C1\u8D2D\u4E70\u540E\u589E\u52A0\u7684\u79EF\u5206\u6570",title:"\u589E\u52A0\u79EF\u5206\u6570 (\u5355\u4F4D\uFF1A\u4E2A)",dataIndex:"addPoints",key:"addPoints",formItemProps:{rules:[function(){return{validator:function(m,h){return h?h<0?Promise.reject(new Error("\u589E\u52A0\u79EF\u5206\u6570\u4E0D\u80FD\u4E3A\u8D1F\u6570")):Promise.resolve():Promise.reject(new Error("\u589E\u52A0\u79EF\u5206\u6570\u4E3A\u5FC5\u586B\u9879"))},required:!0}}]},width:"lg",colProps:{span:24}},{tooltip:"\u672C\u5546\u54C1\u7684\u552E\u5356\u91D1\u989D,1\u5143\u7B49\u4E8E100\u5206",title:"\u552E\u5356\u91D1\u989D (\u5355\u4F4D\uFF1A\u5206)",dataIndex:"total",key:"total",formItemProps:{rules:[function(){return{validator:function(m,h){return h?h<0?Promise.reject(new Error("\u552E\u5356\u91D1\u989D\u4E0D\u80FD\u4E3A\u8D1F\u6570")):Promise.resolve():Promise.reject(new Error("\u552E\u5356\u91D1\u989D\u4E3A\u5FC5\u586B\u9879"))},required:!0}}]},width:"lg",colProps:{span:24}},{tooltip:"\u5546\u54C1\u7684\u63CF\u8FF0\u4FE1\u606F",title:"\u5546\u54C1\u63CF\u8FF0\u4FE1\u606F",key:"description",dataIndex:"description",width:"lg",colProps:{span:24}}],A=[{dataIndex:"id",valueType:"index",hideInTable:!0,key:"id"},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"name",copyable:!0,valueType:"text",ellipsis:!0,key:"name"},{title:"\u5546\u54C1\u91D1\u989D (\u5206)",dataIndex:"total",valueType:"text",key:"total"},{title:"\u589E\u52A0\u79EF\u5206\u6570 (\u4E2A)",dataIndex:"addPoints",valueType:"text",key:"addPoints"},{title:"\u5546\u54C1\u63CF\u8FF0",dataIndex:"description",valueType:"textarea",copyable:!0,ellipsis:!0,key:"description"},{title:"\u5546\u54C1\u72B6\u6001",filters:!0,onFilter:!0,dataIndex:"status",key:"status",valueEnum:{0:{text:"\u5BA1\u6838\u4E2D",status:"Default"},2:{text:"\u5DF2\u4E0B\u7EBF",status:"Error"},1:{text:"\u5DF2\u4E0A\u7EBF",status:"Processing"}}},{title:"\u4EA7\u54C1\u7C7B\u578B",dataIndex:"productType",filters:!0,onFilter:!0,valueType:"text",key:"productType",valueEnum:{VIP:{text:"VIP\u4F1A\u5458"},RECHARGE:{text:"\u79EF\u5206\u5145\u503C"},RECHARGEACTIVITY:{text:"\u5145\u503C\u6D3B\u52A8"}}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",valueType:"dateTime",search:!1,key:"updateTime"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",search:!1,key:"createTime"}],B=M,P=n(35411),f=n(85893),T=function(){var m=(0,O.useState)(!1),h=C()(m,2),e=h[0],$=h[1],Q=(0,O.useState)(!1),V=C()(Q,2),X=V[0],K=V[1],q=(0,O.useState)(!1),z=C()(q,2),ee=z[0],Y=z[1],D=(0,O.useRef)(),re=(0,O.useState)(),H=C()(re,2),F=H[0],N=H[1],ne=function(){var c=g()(l()().mark(function d(s){var t,_;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=p.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),i.prev=1,i.next=4,(0,P.Yq)(E()({},s));case 4:if(_=i.sent,!(_.data&&_.code===0)){i.next=9;break}return t(),p.ZP.success("\u6DFB\u52A0\u6210\u529F"),i.abrupt("return",!0);case 9:i.next=16;break;case 11:return i.prev=11,i.t0=i.catch(1),t(),p.ZP.error("\u6DFB\u52A0\u5931\u8D25! "+i.t0.message),i.abrupt("return",!1);case 16:case"end":return i.stop()}},d,null,[[1,11]])}));return function(s){return c.apply(this,arguments)}}(),te=function(){var c=g()(l()().mark(function d(s){var t,_;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=p.ZP.loading("\u4FEE\u6539\u4E2D"),i.prev=1,i.next=4,(0,P.mB)(E()({id:F==null?void 0:F.id},s));case 4:if(_=i.sent,!(_.data&&_.code===0)){i.next=9;break}return t(),p.ZP.success("\u4FEE\u6539\u6210\u529F"),i.abrupt("return",!0);case 9:i.next=16;break;case 11:return i.prev=11,i.t0=i.catch(1),t(),p.ZP.error("\u4FEE\u6539\u5931\u8D25"+i.t0.message),i.abrupt("return",!1);case 16:case"end":return i.stop()}},d,null,[[1,11]])}));return function(s){return c.apply(this,arguments)}}(),J=function(){var c=g()(l()().mark(function d(s){var t,_,a;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=p.ZP.loading("\u53D1\u5E03\u4E2D"),s){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,(0,P.VA)({id:s.id});case 6:return _=r.sent,t(),_.data&&(p.ZP.success("\u53D1\u5E03\u6210\u529F"),(a=D.current)===null||a===void 0||a.reload()),r.abrupt("return",!0);case 12:return r.prev=12,r.t0=r.catch(3),t(),p.ZP.error(r.t0.message),r.abrupt("return",!1);case 17:case"end":return r.stop()}},d,null,[[3,12]])}));return function(s){return c.apply(this,arguments)}}(),ae=function(){var c=g()(l()().mark(function d(s){var t,_,a;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=p.ZP.loading("\u4E0B\u7EBF\u4E2D"),s){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,(0,P.aG)({id:s.id});case 6:return _=r.sent,t(),_.data&&(p.ZP.success("\u4E0B\u7EBF\u6210\u529F"),(a=D.current)===null||a===void 0||a.reload()),r.abrupt("return",!0);case 12:return r.prev=12,r.t0=r.catch(3),t(),p.ZP.error(r.t0.message),r.abrupt("return",!1);case 17:case"end":return r.stop()}},d,null,[[3,12]])}));return function(s){return c.apply(this,arguments)}}(),ue=function(){var c=g()(l()().mark(function d(s){var t,_,a;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=p.ZP.loading("\u6B63\u5728\u5220\u9664"),s){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,(0,P.Dl)({id:s.id});case 6:return _=r.sent,t(),_.data&&(p.ZP.success("\u5220\u9664\u6210\u529F"),(a=D.current)===null||a===void 0||a.reload()),r.abrupt("return",!0);case 12:return r.prev=12,r.t0=r.catch(3),t(),p.ZP.error("\u5220\u9664\u5931\u8D25",r.t0.message),r.abrupt("return",!1);case 17:case"end":return r.stop()}},d,null,[[3,12]])}));return function(s){return c.apply(this,arguments)}}(),se=function(){var c=g()(l()().mark(function d(){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(F);case 2:case"end":return t.stop()}},d)}));return function(){return c.apply(this,arguments)}}(),ie=function(){p.ZP.success("\u53D6\u6D88\u6210\u529F")},le=[].concat(v()(A),[{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(d,s){return[(0,f.jsx)("a",{onClick:function(){N(s),K(!0)},children:"\u4FEE\u6539"},"update"),s.status===0?(0,f.jsx)("a",{type:"text",onClick:function(){J(s)},children:"\u5BA1\u6838\u901A\u8FC7"},"auditing"):null,s.status===2?(0,f.jsx)("a",{type:"text",onClick:function(){J(s)},children:"\u4E0A\u7EBF"},"online"):null,s.status===1?(0,f.jsx)("a",{type:"text",style:{color:"red"},onClick:function(){ae(s)},children:"\u4E0B\u7EBF"},"offline"):null,(0,f.jsx)(S.Z,{title:"\u8BF7\u786E\u8BA4\u662F\u5426\u5220\u9664\u8BE5\u5546\u54C1!",onConfirm:se,onCancel:ie,okText:"Yes",cancelText:"No",children:(0,f.jsx)("a",{style:{color:"red"},onClick:g()(l()().mark(function t(){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:N(s);case 1:case"end":return a.stop()}},t)})),children:"\u5220\u9664"},"Remove")},"Delete")]}}]);return(0,f.jsxs)(L.Z,{children:[(0,f.jsx)(W.Z,{headerTitle:"\u5546\u54C1\u7BA1\u7406",actionRef:D,rowKey:"key",loading:ee,search:{labelWidth:120},toolBarRender:function(){return[(0,f.jsxs)(w.ZP,{type:"primary",onClick:function(){$(!0)},children:[(0,f.jsx)(R.Z,{})," \u65B0\u5EFA"]},"primary")]},pagination:{defaultPageSize:10},request:function(){var c=g()(l()().mark(function d(s){var t;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Y(!0),a.next=3,(0,P.C4)(E()({},s));case 3:if(t=a.sent,!t.data){a.next=9;break}return Y(!1),a.abrupt("return",{data:t.data.records||[],success:!0,total:t.data.total});case 9:return a.abrupt("return",{data:[],success:!1,total:0});case 10:case"end":return a.stop()}},d)}));return function(d){return c.apply(this,arguments)}}(),columns:le}),(0,f.jsx)(I.Z,{title:"\u6DFB\u52A0\u5546\u54C1",value:{},open:function(){return e},onOpenChange:$,onSubmit:function(){var c=g()(l()().mark(function d(s){var t;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ne(s);case 2:t=a.sent,t&&($(!1),D.current&&D.current.reload());case 4:case"end":return a.stop()}},d)}));return function(d){return c.apply(this,arguments)}}(),onCancel:function(){return $(!1)},columns:B,width:"480px",size:"large"}),(0,f.jsx)(I.Z,{title:"\u4FEE\u6539\u5546\u54C1\u4FE1\u606F",open:function(){return X},value:F,onOpenChange:K,onSubmit:function(){var c=g()(l()().mark(function d(s){var t;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,te(s);case 2:t=a.sent,t&&(K(!1),D.current&&D.current.reload());case 4:case"end":return a.stop()}},d)}));return function(d){return c.apply(this,arguments)}}(),onCancel:function(){return K(!1)},columns:B,width:"480px",size:"large"})]})},o=T},35411:function(x,U,n){n.d(U,{C4:function(){return O},Dl:function(){return C},VA:function(){return B},Yq:function(){return g},aG:function(){return M},mB:function(){return f}});var G=n(15009),v=n.n(G),k=n(97857),l=n.n(k),Z=n(99289),E=n.n(Z),b=n(45618);function g(o,u){return j.apply(this,arguments)}function j(){return j=E()(v()().mark(function o(u,m){return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.request)("/api/productInfo/add",l()({method:"POST",headers:{"Content-Type":"application/json"},data:u},m||{})));case 1:case"end":return e.stop()}},o)})),j.apply(this,arguments)}function C(o,u){return R.apply(this,arguments)}function R(){return R=E()(v()().mark(function o(u,m){return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.request)("/api/productInfo/delete",l()({method:"POST",headers:{"Content-Type":"application/json"},data:u},m||{})));case 1:case"end":return e.stop()}},o)})),R.apply(this,arguments)}function W(o,u){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function o(u,m){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/productInfo/get",_objectSpread({method:"GET",params:_objectSpread({},u)},m||{})));case 1:case"end":return e.stop()}},o)})),y.apply(this,arguments)}function p(o,u){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime().mark(function o(u,m){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/productInfo/get/searchText",_objectSpread({method:"GET",params:_objectSpread({},u)},m||{})));case 1:case"end":return e.stop()}},o)})),S.apply(this,arguments)}function L(o,u){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function o(u,m){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/productInfo/list",_objectSpread({method:"GET",params:_objectSpread({},u)},m||{})));case 1:case"end":return e.stop()}},o)})),w.apply(this,arguments)}function O(o,u){return I.apply(this,arguments)}function I(){return I=E()(v()().mark(function o(u,m){return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.request)("/api/productInfo/list/page",l()({method:"GET",params:l()({},u)},m||{})));case 1:case"end":return e.stop()}},o)})),I.apply(this,arguments)}function M(o,u){return A.apply(this,arguments)}function A(){return A=E()(v()().mark(function o(u,m){return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.request)("/api/productInfo/offline",l()({method:"POST",headers:{"Content-Type":"application/json"},data:u},m||{})));case 1:case"end":return e.stop()}},o)})),A.apply(this,arguments)}function B(o,u){return P.apply(this,arguments)}function P(){return P=E()(v()().mark(function o(u,m){return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.request)("/api/productInfo/online",l()({method:"POST",headers:{"Content-Type":"application/json"},data:u},m||{})));case 1:case"end":return e.stop()}},o)})),P.apply(this,arguments)}function f(o,u){return T.apply(this,arguments)}function T(){return T=E()(v()().mark(function o(u,m){return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.request)("/api/productInfo/update",l()({method:"POST",headers:{"Content-Type":"application/json"},data:u},m||{})));case 1:case"end":return e.stop()}},o)})),T.apply(this,arguments)}}}]);
